# java_calculator


### 요구사항
- 콘솔로 구현입니다.(스윙으로 구현하시는 분들 계실까봐) 
- 객체지향적인 코드로 계산기 구현하기
    - [x]  더하기
    - [x]  빼기
    - [x]  곱하기
    - [x]  나누기
    - [x]  우선순위(사칙연산)
- [x]  테스트 코드 구현하기
- [x]  계산 이력을 맵으로 데이터 저장기능 만들기(인메모리 DB)
- [x] 정규식 사용

# 구현 내용

## Calculator 인터페이스(ConsoleCalculator)

사용자와 실제 계산을 수행하는 모듈 사이를 중재합니다.

계산에 필요한 객체들을 제어합니다.

계산 과정에서 발생하는 예외를 최종적으로 처리합니다. 

​	CalculatorException : 과제에서 구현한 클래스 타입 계층 최상위에 존재합니다.



## Parser 인터페이스 (RegexParser)

Calculator에서 받은 문자열을 토큰으로 분해하고 리스트로 만들어 돌려줍니다.

​	숫자 단위와 연산자(+,-,/,*)로 분해합니다.

문자열 분해 방식은 정규표현식을 선택했습니다.

​	소수점 7자리까지 받을 수 있습니다.

잘못된 형태의 문자열이 들어왔을 경우 예외를 던집니다.

​	예외들은 ParserException을 상속 받습니다.

​	ParserException은 CalculatorException을 상속 받습니다.



## Processor 인터페이스(StringTokenProcessor)

Parser에서 만든 토큰들을 바탕으로 연산을 수행합니다.

숫자 연결 리스트와 연산자 연결 리스트를 사용합니다.

토큰들을 분류하여 두 리스트에 넣습니다.

연산자 리스트를 2회 순회합니다.

​	순회하면서 연산자 위치에 맞는 두 숫자를 숫자 리스트에서 추출하여 연산합니다.

​	연산 결과를 두 숫자가 제외된 자리에 넣습니다.

​	첫번 째 순회에서는 곱셈과 나눗셈 연산을 수행합니다.

​	두번 째 순회에서는 덧셈과 뺼셈 연산을 수행합니다.

숫자 리스트에 최종 계산이 완료된 숫자를 Calculator에게 반환합니다.



## ResultRepository 인터페이스(StringResultRepository)

사용자가 입력한 연산식 문자열과 계산 결과를 Map<String, Double> 자료 구조로 보관합니다.

계산 결과를 저장합니다.

​	같은 연산식이 들어오면 중복해서 저장하지 않습니다.

모든 계산 결과를 제공합니다.

​	이 때 멤버를 갖고 있는 Map을 복사하여 제공합니다.

결과 데이터의 총 개수를 제공합니다.




## 테스트 코드 작성

JUnit5를 활용했습니다.

Parser, Processor, Repository의 public 메서드 중심으로 작성했습니다.







